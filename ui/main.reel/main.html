<!doctype html>
<html>
<head>
    <title>Main</title>
    <meta charset="utf-8">

    <link href="main.css" rel="stylesheet" />

    <script type="text/montage-serialization">
        {
            "localizer": {
                "object": "montage/core/localizer[defaultLocalizer]"
            },

            "pagesList": {
                "prototype": "montage/ui/repetition.reel",
                "properties": {
                    "element": {
                        "#": "pages-list"
                    },
                    "isSelectionEnabled": true
                },
                "bindings": {
                    "contentController": {"<-": "@owner.contentController"}
                }
            },

            "pageThumbnail": {
                "prototype": "ui/page-thumbnail.reel",
                "properties": {
                    "element": {"#": "page-list-item"}
                },
                "bindings": {
                    "item": {"<-": "@pagesList.objectAtCurrentIteration"},
                    "pages": {"<-": "@owner.pages"},
                    "index": {"<-": "@pagesList.currentIteration.index"}
                }
            },


            "spreadView": {
                "prototype": "ui/spread-view.reel",
                "properties": {
                    "element": {"#": "spreadView"},
                    "viewMode": "default",
                    "overlayUrl": "test",
                    "overlayOpacity": 0.5
                },
                "bindings": {
                    "pages": {"<-": "@owner.pages"},
                    "index": {"<-": "@owner.currentPageIndex"}
                },
                "listeners": [
                    {
                        "type": "loadedPage",
                        "listener": {"@": "owner"}
                    }
                ]
            },

            "owner": {
                "properties": {
                    "element": {"#": "main"},
                    "spreadView": {"@": "spreadView"},
                    "pagesList": {"@": "pagesList"}
                },
                "bindings": {
                    "currentPage": {"<-": "@owner.pagesList.selection.0"}
                }
            },

            "copyrightCondition": {
                "prototype": "montage/ui/condition.reel",
                "properties": {
                    "element": {"#": "copyrightCondition"},
                    "removalStrategy": "hide"
                },
                "bindings": {
                    "condition": {"<-": "!!@owner.currentPage.pageWindow && @owner.currentPage.hasCopyright"}
                }
            },

            "copyrightPosition": {
                "prototype": "ui/tools/position-inspector.reel",
                "properties": {
                    "element": {"#": "copyrightPosition"}
                },
                "bindings": {
                    "object": {"<-": "@owner.currentPage"}
                }
            },

            "saveButton": {
                "prototype": "matte/ui/button.reel",
                "properties": {
                    "element": {"#": "saveButton"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "owner"}
                    }
                ]
            }

        }
    </script>

</head>
<body>

    <div data-montage-id="main" class="main">
        <header>
            <section data-montage-id="copyrightCondition" class="main-inspector">
                <h1 class="main-inspector-title">Copyright</h1>
                <div data-montage-id="copyrightPosition"></div>
                <button data-montage-id="saveButton">Save</button>
            </section>
        </header>
        <div class="content">
            <nav class="navigation">
                <ul data-montage-id="pages-list" class="pages-list">
                    <li class="page-list-item">
                        <div data-montage-id="page-list-item">
                        </div>
                    </li>
                </ul>
            </nav>
            <article>
                <section data-montage-id="spreadView" class="spreadView"></section>
            </article>
        </div>
    </div>

</body>
</html>
