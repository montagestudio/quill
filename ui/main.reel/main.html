<!doctype html>
<html>
<head>
    <title>Main</title>
    <meta charset="utf-8">

    <link href="main.css" rel="stylesheet" />

    <script type="text/montage-serialization">
        {
            "localizer": {
                "object": "montage/core/localizer[defaultLocalizer]"
            },

            "viewmodeButton": {
                "prototype": "matte/ui/toggle-button.reel",
                "properties": {
                    "element": {"#": "viewmodeButton"},
                    "pressed": true
                },
                "localizations": {
                    "unpressedLabel": {"key": "dual-view-btn-label"},
                    "pressedLabel": {"key": "single-view-btn-label"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "owner"}
                    }
                ]
            },

            "opacityRange": {
                "prototype": "native/ui/input-range.reel",
                "properties": {
                    "element": {"#": "opacity"},
                    "name": "opacity",
                    "min": 0,
                    "max": 1,
                    "step": 0.05
                },
                "bindings": {
                    "value": {"<->": "@spreadView.overlayOpacity"}
                }
            },

            "autoOpacityCheck": {
                "prototype": "native/ui/input-checkbox.reel",
                "properties": {
                    "element": {"#": "autoOpacity"}
                },
                "localizations": {
                    "title": {"key": "auto-opacity-tooltip"}
                },

                "bindings": {
                    "checked": {"<->": "@spreadView.autoOverlayOpacity"}
                }
            },

            "pagesList": {
                "prototype": "montage/ui/repetition.reel",
                "properties": {
                    "element": {
                        "#": "pages-list"
                    },
                    "isSelectionEnabled": true
                },
                "bindings": {
                    "contentController": {"<-": "@owner.contentController"}
                }
            },

            "pageThumbnail": {
                "prototype": "ui/page-thumbnail.reel",
                "properties": {
                    "element": {"#": "page-list-item"}
                },
                "bindings": {
                    "item": {"<-": "@pagesList.objectAtCurrentIteration"},
                    "pages": {"<-": "@owner.pages"},
                    "index": {"<-": "@pagesList.currentIteration.index"}
                }
            },


            "spreadView": {
                "prototype": "ui/spread-view.reel",
                "properties": {
                    "element": {"#": "spreadView"},
                    "viewMode": "default",
                    "showOverlay": false,
                    "overlayOpacity": "1"
                },
                "bindings": {
                    "pages": {"<-": "@owner.pages"},
                    "index": {"<-": "@owner.currentPageIndex"},
                    "showOverlay": {"<->": "@spreadView.overlayOpacity != '1'"}
                }
            },

            "owner": {
                "properties": {
                    "element": {"#": "main"},
                    "spreadView": {"@": "spreadView"},
                    "pagesList": {"@": "pagesList"}
                },
                "bindings": {
                    "currentPage": {"<-": "@owner.pagesList.selection.0"}
                }
            }

        }
    </script>

</head>
<body>

    <div data-montage-id="main" class="main">
        <header>
            <button data-montage-id="viewmodeButton" class="Action-button Action-button--viewmode"></button>
            <img src="/import-activity/assets/images/pdf-icon.png" class="overlay-icon">
            <input type="range" data-montage-id="opacity" class="overlay-range"/>
            <img src="/import-activity/assets/images/epub-icon.png" class="overlay-icon">
            <input type="checkbox" data-montage-id="autoOpacity" class="auto-opacity"/>
        </header>
        <div class="content">
            <nav class="navigation">
                <ul data-montage-id="pages-list" class="pages-list">
                    <li class="page-list-item">
                        <div data-montage-id="page-list-item">
                        </div>
                    </li>
                </ul>
            </nav>
            <article>
                <section data-montage-id="spreadView" class="spreadView"></section>
            </article>
        </div>
    </div>

</body>
</html>
